{% extends "base.html" %}
{% load static %}
{% load query_params %}

{% block head %}
<link rel="stylesheet" type="text/css" href="{% static 'assets/css/style.min.css' %}">
{% endblock head %}


{% block content %}
<!-- Start of Main -->
<main class="main">
    <!-- Start of Breadcrumb -->
    <nav class="breadcrumb-nav">
        <div class="container">
            <ul class="breadcrumb bb-no">
                <li><a href="demo1.html">صفحه اصلی </a></li>
                <li>فروشگاه</li>
            </ul>
        </div>
    </nav>
    <!-- End of Breadcrumb -->

    <!-- Start of Page Content -->
    <div class="page-content">
        <div class="container">
            <!-- Start of Shop Banner -->
            <div class="shop-default-banner banner d-flex align-items-center mb-5 br-xs"
                 style="background-image: {% static 'assets/images/shop/banner1.jpg' %}; background-color: #FFC74E;">
                <div class="banner-content">
                    <h4 class="banner-subtitle font-weight-bold">مجموعه لوازم جانبی</h4>
                    <h3 class="banner-title text-white text-uppercase font-weight-bolder ls-normal">مچ دست هوشمند</h3>
                    <a href="shop-banner-sidebar.html" class="btn btn-dark btn-rounded btn-icon-right">اکنون کشف کنید<i
                            class="w-icon-long-arrow-left"></i></a>
                </div>
            </div>
            <!-- End of Shop Banner -->

            <div class="shop-default-brands mb-5">
                <div class="row brands-carousel owl-carousel owl-theme cols-xl-7 cols-lg-6 cols-md-4 cols-sm-3 cols-2"
                     data-owl-options="{
                                'items': 7,
                                'nav': false,
                                'dots': true,
                                'margin': 20,
                                'loop': true,
                                'autoPlay': 'true',
                                'responsive': {
                                    '0': {
                                        'items': 2
                                    },
                                    '576': {
                                        'items': 3
                                    },
                                    '768': {
                                        'items': 4
                                    },
                                    '992': {
                                        'items': 6
                                    },
                                    '1200': {
                                        'items': 7
                                    }
                                }
                            }
                        ">
                    <figure>
                        <img src="{% static 'assets/images/brands/category/1.png' %}" alt="Brand" width="160"
                             height="90"/>
                    </figure>
                    <figure>
                        <img src="{% static 'assets/images/brands/category/2.png' %}" alt="Brand" width="160"
                             height="90"/>
                    </figure>
                    <figure>
                        <img src="{% static 'assets/images/brands/category/3.png' %}" alt="Brand" width="160"
                             height="90"/>
                    </figure>
                    <figure>
                        <img src="{% static 'assets/images/brands/category/4.png' %}" alt="Brand" width="160"
                             height="90"/>
                    </figure>
                    <figure>
                        <img src="{% static 'assets/images/brands/category/5.png' %}" alt="Brand" width="160"
                             height="90"/>
                    </figure>
                    <figure>
                        <img src="{% static 'assets/images/brands/category/6.png' %}" alt="Brand" width="160"
                             height="90"/>
                    </figure>
                    <figure>
                        <img src="{% static 'assets/images/brands/category/7.png' %}" alt="Brand" width="160"
                             height="90"/>
                    </figure>
                </div>
            </div>
            <!-- End of Shop Brands-->

            <!-- Start of Shop Category -->
            <div class="shop-default-category category-ellipse-section mb-6">
                <div class="owl-carousel owl-theme row gutter-lg cols-xl-8 cols-lg-7 cols-md-6 cols-sm-4 cols-xs-3 cols-2"
                     data-owl-options="{
                            'nav': false,
                            'dots': true,
                            'margin': 20,
                            'responsive': {
                                '0': {
                                    'items': 2
                                },
                                '480': {
                                    'items': 3
                                },
                                '576': {
                                    'items': 4
                                },
                                '768': {
                                    'items': 6
                                },
                                '992': {
                                    'items': 7
                                },
                                '1200': {
                                    'items': 8,
                                    'margin': 30
                                }
                            }
                        }">
                    {% for cat in category %}
                    <div class="category-wrap">
                        <div class="category category-ellipse">
                            <figure class="category-media">
                                <a href="{% url 'product:product_list' cat.name %}">
                                    <img src="#" alt="Categroy"
                                         width="190" height="190" style="background-color: #5C92C0;"/>
                                </a>
                            </figure>
                            <div class="category-content">
                                <h4 class="category-name">
                                    <a href="{% url 'product:product_list' cat.name %}">{{cat.name}} </a>
                                </h4>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            <!-- End of Shop Category -->

            <!-- Start of Shop Content -->
            <div class="shop-content row gutter-lg mb-10">
                <!-- Start of Sidebar, Shop Sidebar -->
                <aside class="sidebar shop-sidebar sticky-sidebar-wrapper sidebar-fixed">
                    <!-- Start of Sidebar Overlay -->
                    <div class="sidebar-overlay"></div>
                    <a class="sidebar-close" href="#"><i class="close-icon"></i></a>

                    <!-- Start of Sidebar Content -->
                    <div class="sidebar-content scrollable">
                        <!-- Start of Sticky Sidebar -->
                        <div class="sticky-sidebar">
                            <div class="filter-actions">
                                <label>فیلتر : </label>
                            </div>
                            <!-- Start of Collapsible widget -->
                            <div class="widget widget-collapsible">
                                <h3 class="widget-title"><label>تمام دسته بندیها</label></h3>
                                <ul class="widget-body filter-items search-ul">
                                    {% for cat in category %}
                                    <li><a href="{% url 'product:product_list' cat.name %}">{{cat.name}}</a></li>
                                    {% endfor %}
                                </ul>
                            </div>
                            <!-- End of Collapsible Widget -->

                            <!-- Start of Collapsible Widget -->
                            <div class="widget widget-collapsible">
                                <h3 class="widget-title"><label>قیمت </label></h3>
                                <div class="widget-body">
                                    <ul class="filter-items search-ul">
                                        <li><a href="{% url_add_query request.get_full_path price='1000000' %}">0 تومان - 1000000 تومان</a></li>
                                        <li><a href="{% url_add_query request.get_full_path price='2000000' %}">1000000 تومان - 2000000 تومان</a></li>
                                        <li><a href="{% url_add_query request.get_full_path price='3000000' %}">2000000 تومان - 3000000 تومان</a></li>
                                        <li><a href="{% url_add_query request.get_full_path price='6000000' %}">3000000 تومان - 6000000 تومان</a></li>
                                        <li><a href="{% url_add_query request.get_full_path price='50000000' %}">6000000 تومان+</a></li>
                                    </ul>
                                </div>
                            </div>
                            <!-- End of Collapsible Widget -->
                            {% for property, detail in cat_details.items %}
                            <!-- Start of Collapsible Widget -->
                            <div class="widget widget-collapsible">
                                <h3 class="widget-title"><label>{{property}}</label></h3>
                                <div class="widget-body">
                                    <ul class="filter-items search-ul item-check mt-1">
                                    {% for d in detail %}
                                        <li><input type="submit" name="{{property}}" value="{{d}}"><a href="{% url_add_query request.get_full_path property=property detail=d %}">{{d}}</a></li>

                                    {% endfor %}
                                    </ul>
                                </div>
                            </div>
                            <!-- End of Collapsible Widget -->
                            {% endfor %}
                        </div>
                        <!-- End of Sidebar Content -->
                    </div>
                    <!-- End of Sidebar Content -->
                </aside>
                <!-- End of Shop Sidebar -->

                <!-- Start of Shop Main Content -->
                <div class="main-content">
                    <form action="{% url 'product:search' %}" method="GET">
                    <nav class="toolbox sticky-toolbox sticky-content fix-top">
                        <div class="toolbox-left">
                            <div class="toolbox-item toolbox-sort select-box text-dark">
                                <label>مرتب سازی بر اساس: </label>
                                <select name="orderby" class="form-control">
                                    <option value="default">مرتب سازی پیش فرض</option>
                                    <option value="rate">مرتب سازی بر اساس رتبه بندی</option>
                                    <option value="-price">مرتب سازی بر اساس قیمت: کم به زیاد</option>
                                    <option value="price">مرتب سازی بر اساس قیمت: بالا به پایین</option>
                                </select>
                            </div>
                        </div>
                        <div class="toolbox-right">
                            <div class="toolbox-item toolbox-show select-box">
                                <select name="count" class="form-control">
                                    <option value="9">نمایش 9</option>
                                    <option value="12" selected="selected">نمایش 12</option>
                                    <option value="24">نمایش 24</option>
                                    <option value="36">نمایش 36</option>
                                </select>
                            </div>
                            <div class="toolbox-item toolbox-layout">
                                <button type="submit">filter</button>
                            </div>
                        </div>
                    </nav>
                    </form>
                    <div class="product-wrapper row cols-md-3 cols-sm-2 cols-2">
                        {% for product in products %}
                        <div class="product-wrap">
                            <div class="product text-center">
                                <figure class="product-media">
                                    <a href="{% url 'product:product_detail' product.product_slug %}">
                                        <img src="{{product.img.url}}" alt="Product" width="300"
                                             height="338"/>
                                    </a>
                                    <div class="product-action-horizontal">
                                        <a href="#" class="btn-product-icon btn-cart w-icon-cart"
                                           title="افزودن به سبد خرید"></a>
                                        <a href="#" class="btn-product-icon btn-wishlist w-icon-heart"
                                           title="علاقه مندیها"></a>
                                        <a href="#" class="btn-product-icon btn-compare w-icon-compare"
                                           title="مقایسه کردن"></a>
                                        <a href="#" class="btn-product-icon btn-quickview w-icon-search"
                                           title="نمایش سریع"></a>
                                    </div>
                                </figure>
                                <div class="product-details">
                                    <div class="product-cat">
                                        <a href="shop-banner-sidebar.html">{{product.category}} </a>
                                    </div>
                                    <h3 class="product-name">
                                        <a href="{% url 'product:product_detail' product.product_slug %}">{{product.name}}</a>
                                    </h3>
                                    <div class="ratings-container">
                                        <div class="ratings-full">
                                            <span class="ratings" style="width: 100%;"></span>
                                            <span class="tooltiptext tooltip-top"></span>
                                        </div>
                                        <a href="{% url 'product:product_detail' product.product_slug %}"
                                           class="rating-reviews">(3 نظر )</a>
                                    </div>
                                    <div class="product-pa-wrapper">
                                        <div class="product-price">
                                            {{product.price}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>

                    <div class="toolbox toolbox-pagination justify-content-between">
                        <p class="showing-info mb-2 mb-sm-0">
                            نمایش <span>1-12 از 60</span>محصول
                        </p>
                        <ul class="pagination">
                            <li class="prev disabled">
                                <a href="#" aria-label="قبلی " tabindex="-1" aria-disabled="true">
                                    <i class="w-icon-long-arrow-right"></i>قبلی
                                </a>
                            </li>
                            <li class="page-item active">
                                <a class="page-link" href="#">1</a>
                            </li>
                            <li class="page-item">
                                <a class="page-link" href="#">2</a>
                            </li>
                            <li class="next">
                                <a href="#" aria-label="بعدی ">
                                    بعدی <i class="w-icon-long-arrow-left"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                <!-- End of Shop Main Content -->
            </div>
            <!-- End of Shop Content -->
        </div>
    </div>
    <!-- End of Page Content -->
</main>
<!-- End of Main -->
{% endblock content %}